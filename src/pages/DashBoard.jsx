import React, { useEffect, useState } from 'react'
import SlideBar from '../component/SlideBar'
import '../assets/css/dashboard.css'
import { loadStudents } from '../common/Common'

function DashBoard() {

    const [students, setStudents] = useState([]);
    const [totalStudents, setTotalStudents] = useState('0');

    useEffect(() => {
        loadStudents()
            .then(data => {
                setStudents(data);
                setTotalStudents(data.length);
            })
            .catch(err => {
                console.log(err);
            });
    }, []);
    const tableBody = () => {
        let body = [];
        students.forEach((data, index) => {
            body.push(
                <tr key={"Student" + index}>
                    <td>{data.id}</td>
                    <td>{data.name}</td>
                    <td>{data.dob}</td>
                    <td>{data.gpa}</td>
                    <td>{data.gender}</td>
                    <td>{data.email}</td>
                </tr>
            );
        });
        return body;
    };

    const countGender = () => {
        const genderCount = { male: 0, female: 0 };
        const increment = (prev) => prev + 1;
        students.forEach((student) => {
            if (student.gender === 'male') {
                genderCount.male = increment(genderCount.male);
            } else {
                genderCount.female = increment(genderCount.female);
            }
        });
        return genderCount;
    };


    return (
        <div className='dashboard-main-container'>
            <div className='dashboard-main-wrapper'>
                <div className='dashboard-left'>
                    <SlideBar />
                </div>
                <div className='dashboard-right'>
                    <div>
                        <h1>DashBoard</h1>
                    </div>
                    <div className='dashboard-right-summary'>
                        <div className='icon-count-main'>
                            <div>
                                <svg xmlns="http://www.w3.org/2000/svg" version="1.0" width="32.000000pt" height="32.000000pt" viewBox="0 0 512.000000 512.000000" preserveAspectRatio="xMidYMid meet">
                                    <g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none">
                                        <path d="M1150 5036 c-307 -54 -552 -185 -768 -409 -207 -216 -338 -494 -373 -791 -6 -58 -9 -350 -7 -811 l3 -720 28 -88 c65 -208 180 -371 344 -485 28 -20 31 -26 23 -47 -19 -49 -90 -626 -90 -726 0 -38 -1 -39 -37 -39 -54 -1 -116 -32 -149 -76 -28 -36 -29 -42 -32 -162 -4 -147 -2 -160 40 -208 39 -44 82 -64 138 -64 l40 0 0 -144 c0 -130 2 -146 21 -170 l20 -26 285 0 c167 0 293 4 304 10 10 5 23 23 28 40 11 29 13 30 77 30 64 0 66 -1 77 -30 5 -17 18 -35 28 -40 12 -6 641 -10 1753 -10 1693 0 1735 0 1758 19 23 18 24 26 27 170 l4 151 39 0 c43 0 104 27 130 56 40 46 49 81 49 195 0 135 -18 184 -83 227 -36 24 -52 27 -137 30 l-97 4 -17 181 c-24 254 -63 532 -81 588 -9 25 -32 65 -51 88 -61 71 -242 164 -479 246 -118 41 -152 66 -95 73 305 34 554 218 674 499 l32 76 54 14 c218 56 346 304 259 503 -11 24 -27 52 -36 62 -15 16 -13 21 23 60 241 262 307 674 174 1088 -43 132 -79 202 -113 218 -25 12 -33 11 -77 -12 -94 -49 -165 -32 -345 83 -43 28 -85 51 -93 51 -7 0 -27 -7 -44 -16 -29 -15 -32 -15 -86 19 -53 33 -56 38 -54 69 4 47 -18 70 -113 116 -167 82 -333 122 -510 122 -131 0 -229 -24 -360 -89 -160 -80 -315 -209 -460 -384 l-40 -48 -58 20 c-74 26 -205 51 -265 51 -42 0 -49 4 -126 78 -176 169 -394 285 -646 344 -110 26 -399 34 -510 14z m401 -151 c485 -73 878 -432 999 -911 36 -142 42 -303 38 -984 -4 -584 -6 -651 -23 -710 -47 -172 -139 -311 -268 -406 l-58 -43 -112 59 c-114 60 -304 139 -390 162 -68 18 -60 41 18 50 308 39 581 282 667 596 20 70 22 108 26 422 4 400 9 380 -97 419 -131 48 -253 158 -361 326 -69 108 -102 145 -129 145 -11 0 -44 -19 -73 -43 -81 -65 -135 -100 -227 -147 -291 -146 -743 -262 -1145 -295 -65 -6 -83 -11 -103 -31 l-25 -25 5 -357 c4 -402 5 -409 82 -567 116 -240 352 -411 610 -443 85 -10 85 -31 -1 -56 -101 -29 -314 -118 -404 -169 l-80 -46 -48 36 c-141 106 -235 247 -280 421 -15 60 -17 137 -17 792 0 788 0 790 57 970 60 189 161 353 302 494 176 175 413 298 646 336 41 6 82 13 90 15 44 8 217 3 301 -10z m359 -1175 c93 -129 272 -283 354 -304 l26 -6 0 -298 c0 -337 -4 -363 -72 -502 -78 -160 -241 -289 -423 -335 -87 -22 -763 -22 -850 0 -263 67 -460 289 -495 557 -5 40 -10 180 -10 310 l0 237 43 5 c23 3 83 10 132 17 439 55 940 220 1176 387 51 36 40 41 119 -68z m1416 -76 c279 -133 653 -223 1002 -241 l123 -6 -3 -311 c-3 -289 -5 -316 -25 -376 -55 -162 -178 -305 -324 -378 -140 -70 -156 -72 -569 -72 -410 0 -428 2 -566 70 -53 26 -106 63 -153 106 l-71 66 0 468 0 469 60 32 c80 43 173 142 216 233 19 39 34 76 34 83 0 6 37 -11 83 -39 45 -28 132 -75 193 -104z m1412 -485 c44 -46 33 -160 -22 -232 -29 -39 -99 -88 -109 -77 -2 3 -1 72 2 153 5 132 8 150 25 163 29 21 82 18 104 -7z m-1946 -903 c116 -80 236 -128 357 -142 48 -5 61 -10 61 -23 0 -12 -21 -24 -72 -40 -205 -65 -435 -176 -505 -244 -76 -73 -89 -124 -138 -557 -14 -124 -25 -246 -25 -272 0 -39 -3 -48 -18 -48 -16 0 -20 20 -35 183 -21 218 -64 541 -77 579 -8 25 -5 30 33 58 160 116 297 319 339 499 6 28 13 51 14 51 2 0 31 -20 66 -44z m-1262 -220 c0 -49 -5 -70 -23 -97 -71 -106 -203 -106 -274 0 -18 27 -23 48 -23 97 l0 64 160 0 160 0 0 -64z m2160 0 c0 -49 -5 -70 -22 -96 -34 -50 -71 -72 -127 -78 -41 -4 -58 0 -94 21 -53 31 -75 72 -83 156 l-7 61 167 0 166 0 0 -64z m-2588 -176 c18 -30 52 -68 75 -86 l41 -31 -64 -64 c-35 -34 -66 -61 -68 -58 -7 6 -96 257 -96 268 0 8 58 30 72 27 4 0 22 -26 40 -56z m624 44 c13 -3 24 -10 24 -14 0 -9 -91 -263 -96 -269 -3 -3 -33 24 -69 59 l-64 64 37 27 c40 29 69 65 96 117 12 23 22 32 33 28 8 -3 26 -9 39 -12z m1536 -44 c18 -30 52 -68 75 -86 l41 -31 -64 -64 c-35 -34 -66 -61 -68 -58 -8 8 -96 252 -96 265 0 12 54 34 72 31 4 -1 22 -27 40 -57z m609 49 c19 -7 36 -13 38 -15 5 -4 -93 -274 -99 -274 -3 0 -34 28 -68 63 l-63 64 40 27 c39 27 101 110 101 134 0 15 8 15 51 1z m-3240 -268 c78 -81 131 -215 145 -367 5 -57 2 -92 -20 -185 -15 -63 -29 -124 -31 -136 -5 -22 -9 -23 -135 -23 l-130 0 0 38 c0 40 31 324 55 517 17 125 39 205 58 205 6 0 32 -22 58 -49z m1558 22 c18 -40 91 -607 91 -708 l0 -26 -132 3 -132 3 -25 110 c-44 193 -30 349 46 499 27 53 108 146 128 146 6 0 17 -12 24 -27z m585 -4 c78 -68 137 -203 157 -358 12 -91 14 -76 -46 -348 -5 -22 -9 -23 -135 -23 l-130 0 0 43 c0 53 46 460 65 585 16 95 28 132 45 132 5 0 25 -14 44 -31z m1575 4 c17 -45 63 -385 87 -656 l6 -78 -132 3 -133 3 -24 100 c-47 199 -38 330 32 482 33 70 116 173 140 173 7 0 18 -12 24 -27z m-2946 -21 l27 -28 -30 -29 -30 -29 -30 29 -30 29 27 28 c15 15 30 28 33 28 3 0 18 -13 33 -28z m2160 0 l27 -28 -30 -29 -30 -29 -30 29 -30 29 27 28 c15 15 30 28 33 28 3 0 18 -13 33 -28z m-2335 -165 l32 -33 -29 -28 -29 -28 -26 38 -26 38 22 23 c12 13 22 23 23 23 0 0 15 -15 33 -33z m355 -21 c-4 -6 -16 -23 -27 -39 l-20 -27 -28 27 -28 27 32 33 32 33 23 -22 c12 -11 19 -26 16 -32z m1805 21 l32 -33 -29 -28 -29 -28 -26 38 -26 38 22 23 c12 13 22 23 23 23 0 0 15 -15 33 -33z m335 -49 l-26 -39 -29 28 -28 27 32 33 32 33 22 -21 23 -21 -26 -40z m-2317 -129 l29 -31 -28 -24 c-35 -30 -48 -30 -77 1 l-24 25 29 30 c16 17 32 30 35 30 3 0 19 -14 36 -31z m2157 3 l27 -28 -33 -32 -33 -32 -29 30 -29 30 29 30 c16 17 32 30 35 30 3 0 18 -13 33 -28z" />
                                        <path d="M757 3292 c-33 -36 -8 -92 40 -92 18 0 21 -8 26 -66 5 -71 25 -108 70 -134 24 -13 29 -13 54 6 41 30 63 80 63 144 0 63 -28 133 -58 149 -12 6 -56 11 -100 11 -64 0 -82 -4 -95 -18z" />
                                        <path d="M1777 3299 c-29 -17 -57 -88 -57 -144 0 -62 33 -133 72 -155 25 -13 29 -13 55 6 40 29 63 81 63 141 0 51 0 52 32 55 23 2 37 11 47 29 13 24 13 29 -2 53 -17 25 -21 26 -105 26 -48 0 -95 -5 -105 -11z" />
                                        <path d="M1196 2749 c-35 -28 -36 -80 -1 -115 60 -60 190 -83 273 -48 93 39 131 120 76 163 -35 28 -63 26 -104 -4 -21 -16 -47 -25 -70 -25 -21 0 -50 10 -72 25 -45 30 -67 31 -102 4z" />
                                        <path d="M3013 3368 c-45 -50 -60 -120 -42 -191 29 -115 128 -129 168 -24 15 40 14 131 -3 171 -26 63 -86 84 -123 44z" />
                                        <path d="M3946 3360 c-25 -30 -46 -86 -46 -123 0 -40 24 -108 46 -132 43 -47 106 -24 133 48 16 42 13 134 -5 173 -33 69 -86 83 -128 34z" />
                                        <path d="M3342 2747 c-46 -49 -18 -108 73 -153 49 -23 64 -26 128 -22 76 5 115 20 159 61 38 36 45 72 21 105 -28 38 -74 41 -122 8 -48 -33 -95 -34 -143 -1 -47 32 -88 32 -116 2z" />
                                    </g>
                                </svg>
                            </div>
                            <div>{totalStudents}</div>
                        </div>
                        <div className='icon-count-main'>
                            <div>
                                <svg xmlns="http://www.w3.org/2000/svg" version="1.0" width="32.000000pt" height="32.000000pt" viewBox="0 0 512.000000 512.000000" preserveAspectRatio="xMidYMid meet">
                                <g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none">
                                <path d="M2506 5105 c-314 -65 -604 -266 -887 -615 l-36 -44 -79 26 c-195 65 -427 87 -559 53 -81 -21 -109 -43 -113 -88 -4 -49 -94 -140 -131 -133 -64 11 -101 -42 -137 -199 -29 -124 -27 -431 4 -580 44 -209 140 -464 242 -645 l49 -89 -21 -48 c-33 -72 -37 -201 -9 -291 37 -123 130 -236 243 -293 21 -11 69 -27 106 -35 l67 -15 28 -78 c61 -173 208 -364 361 -470 136 -94 305 -161 443 -176 103 -11 103 -11 103 -53 l-1 -37 -147 -48 c-276 -90 -533 -217 -610 -301 -51 -55 -77 -105 -91 -176 -14 -74 -47 -317 -71 -529 -17 -152 -17 -177 -5 -201 8 -15 22 -30 30 -34 30 -11 2545 -7 2566 5 35 18 39 50 25 180 -12 106 -17 126 -36 141 -30 24 -75 23 -101 -3 -20 -20 -21 -29 -16 -101 l5 -78 -211 2 -212 3 1 100 c2 158 54 333 132 447 31 45 109 125 137 141 38 21 69 -44 90 -184 9 -57 18 -112 21 -122 9 -28 67 -50 98 -36 46 21 50 45 32 176 -29 199 -77 272 -240 365 -121 69 -343 164 -498 213 l-128 40 0 37 c0 42 0 42 105 53 152 17 348 101 480 206 144 114 266 280 322 439 l28 79 67 15 c169 38 298 160 350 329 40 132 12 306 -61 371 -12 11 -21 23 -21 29 0 5 22 34 50 64 150 164 255 388 295 632 23 137 17 379 -14 535 -36 176 -119 413 -164 464 -28 30 -64 28 -133 -9 -51 -27 -67 -30 -119 -27 -86 5 -169 48 -440 228 -416 275 -654 366 -985 376 -93 2 -157 -1 -204 -11z m-482 -1602 c226 -149 552 -285 885 -368 216 -54 595 -105 783 -105 l79 0 -4 -402 c-4 -452 -4 -450 -81 -613 -115 -241 -320 -406 -586 -471 -64 -15 -131 -18 -468 -22 -246 -2 -430 0 -494 7 -390 43 -689 316 -764 699 -11 56 -14 162 -14 437 l0 363 73 16 c39 9 110 35 157 58 152 75 298 249 339 406 7 23 14 42 18 42 3 0 38 -21 77 -47z m-874 -770 c28 -19 42 -38 51 -70 7 -20 5 -21 -46 -16 -123 13 -198 -65 -129 -134 22 -22 30 -24 70 -18 36 5 51 2 79 -15 l35 -22 0 -94 c0 -94 0 -95 -22 -88 -84 25 -153 85 -194 167 -53 103 -40 257 24 292 37 19 102 19 132 -2z m2958 3 c44 -23 57 -59 57 -155 0 -74 -4 -93 -28 -138 -43 -83 -112 -142 -194 -167 -23 -7 -23 -6 -23 83 0 68 4 93 16 105 29 29 54 37 97 31 85 -13 131 69 71 126 -22 21 -35 24 -100 24 -67 0 -74 2 -74 20 1 65 108 107 178 71z m-1310 -1458 c-5 -102 -24 -152 -75 -200 -64 -61 -171 -78 -253 -41 -91 41 -130 110 -138 246 l-5 87 238 0 238 0 -5 -92z m-584 -183 c21 -53 95 -138 154 -176 l42 -27 -107 -101 c-81 -78 -109 -98 -115 -87 -11 19 -138 375 -138 386 0 9 110 48 136 49 6 1 19 -19 28 -44z m800 25 c36 -12 66 -25 66 -30 0 -13 -132 -383 -140 -392 -3 -5 -54 38 -113 93 l-108 101 43 27 c59 38 133 123 154 176 9 25 20 45 24 45 4 0 38 -9 74 -20z m-1427 -302 c141 -117 234 -339 237 -563 l1 -100 -213 -3 -213 -2 5 32 c3 18 13 96 21 173 38 332 59 434 97 483 15 18 22 16 65 -20z m1034 -148 l-54 -49 -53 46 c-30 25 -54 48 -54 51 0 4 24 30 52 59 l53 53 55 -56 55 -55 -54 -49z m-225 -106 c30 -25 54 -50 54 -56 0 -10 -90 -97 -101 -98 -7 0 -89 115 -89 126 0 6 71 73 79 74 2 0 28 -21 57 -46z m435 14 c21 -17 39 -36 39 -41 0 -14 -82 -128 -91 -125 -12 5 -99 88 -99 96 0 6 100 101 108 102 2 0 21 -14 43 -32z m-203 -241 l53 -53 -55 -52 c-30 -29 -58 -52 -61 -52 -3 0 -31 23 -61 52 l-55 52 53 53 c29 29 57 53 63 53 6 0 34 -24 63 -53z"/>
                                <path d="M1902 2980 c-40 -39 -56 -90 -56 -170 0 -80 16 -131 56 -170 80 -80 180 14 180 170 0 78 -23 141 -64 175 -40 34 -79 32 -116 -5z"/>
                                <path d="M3115 2988 c-44 -34 -65 -92 -65 -178 0 -248 207 -272 236 -27 13 108 -48 227 -115 227 -16 0 -41 -10 -56 -22z"/>
                                <path d="M2346 2179 c-43 -34 -36 -78 20 -128 61 -53 126 -74 217 -69 163 8 286 130 201 197 -35 28 -66 26 -102 -4 -37 -31 -74 -45 -117 -45 -43 0 -80 14 -117 45 -36 30 -67 32 -102 4z"/>
                                </g>
                                </svg>
                            </div>
                            <div>{countGender().male}</div>
                        </div>
                        <div className='icon-count-main'>
                            <div>
                                <svg xmlns="http://www.w3.org/2000/svg" version="1.0" width="32.000000pt" height="32.000000pt" viewBox="0 0 512.000000 512.000000" preserveAspectRatio="xMidYMid meet">
                                <g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none">
                                <path d="M2400 5113 c-461 -47 -856 -231 -1178 -550 -77 -76 -84 -86 -80 -116 3 -17 8 -39 12 -47 4 -10 -8 -35 -34 -70 -38 -50 -43 -54 -78 -52 -47 4 -62 -8 -107 -83 -134 -222 -228 -511 -255 -780 -8 -75 -10 -421 -8 -1095 4 -1067 2 -1012 59 -1190 78 -242 258 -483 464 -619 44 -29 81 -54 83 -55 1 -2 -7 -79 -18 -172 -27 -225 -26 -238 6 -263 27 -21 27 -21 1294 -21 1267 0 1267 0 1294 21 32 25 33 38 6 263 -11 93 -19 170 -18 172 2 1 37 25 78 52 92 62 215 174 236 214 18 35 13 64 -16 96 -36 38 -65 29 -144 -47 -69 -66 -166 -145 -171 -139 -2 2 -10 45 -19 96 -17 100 -47 168 -94 219 -79 85 -346 216 -627 309 l-130 43 -3 34 -3 35 68 7 c416 44 758 343 876 763 20 72 21 104 25 529 3 442 3 452 -17 472 -11 11 -39 25 -63 31 -175 47 -385 241 -538 497 -84 141 -98 144 -223 44 -131 -105 -264 -179 -472 -261 -197 -78 -509 -169 -720 -210 -33 -6 -68 -14 -79 -17 -18 -5 -18 1 -12 138 14 304 49 565 105 786 85 335 214 603 359 746 l59 58 122 8 c638 40 1224 -252 1574 -784 162 -247 257 -535 277 -842 12 -193 13 -1753 0 -1903 -10 -121 -43 -255 -86 -349 -28 -62 -30 -88 -8 -119 20 -28 93 -31 117 -4 41 46 109 260 127 405 14 112 14 1925 -1 2055 -79 728 -556 1342 -1234 1587 -247 90 -566 133 -805 108z m847 -1650 c130 -185 289 -328 445 -401 l79 -37 -4 -385 c-3 -357 -5 -391 -25 -465 -81 -294 -301 -526 -583 -613 -120 -37 -241 -44 -666 -39 -435 5 -466 9 -608 68 -247 103 -434 318 -506 584 -21 74 -23 109 -27 452 -3 306 -1 374 10 377 7 2 78 11 158 21 605 69 1279 287 1590 514 44 32 57 37 65 26 6 -7 38 -53 72 -102z m-1167 -2085 l91 -12 -3 -33 -3 -33 -160 -56 c-88 -30 -167 -57 -176 -60 -14 -5 -18 6 -23 78 -4 45 -9 108 -12 139 l-6 57 100 -34 c56 -18 142 -39 192 -46z m710 -96 c0 -74 -4 -96 -25 -139 -31 -61 -81 -102 -146 -119 -103 -27 -213 21 -261 115 -25 47 -28 64 -28 142 l0 89 230 0 230 0 0 -88z m-577 -195 c35 -70 88 -131 143 -163 25 -15 44 -29 42 -33 -6 -13 -208 -204 -211 -200 -6 7 -147 402 -145 404 6 5 124 43 134 44 7 1 23 -23 37 -52z m798 32 c35 -12 65 -23 67 -24 2 -2 -139 -397 -145 -404 -3 -4 -205 187 -211 200 -2 4 17 18 42 33 55 32 108 93 143 163 14 29 28 53 32 53 4 0 36 -10 72 -21z m-1392 -338 c111 -110 178 -271 201 -481 6 -52 8 -107 5 -122 l-7 -28 -210 0 -210 0 7 68 c15 152 66 519 76 549 12 36 46 83 60 83 5 0 41 -31 78 -69z m1994 44 c9 -13 24 -50 32 -82 14 -56 75 -518 75 -568 l0 -25 -209 0 -209 0 -7 28 c-3 15 -1 70 5 122 23 209 90 369 199 481 38 38 75 69 82 69 8 0 22 -12 32 -25z m-995 -53 l53 -47 -56 -55 -55 -54 -55 54 -56 55 53 47 c29 26 55 47 58 47 3 0 29 -21 58 -47z m-215 -314 c-26 -26 -52 -48 -58 -48 -5 0 -29 28 -52 63 l-42 62 42 43 41 42 58 -57 58 -57 -47 -48z m449 53 c-47 -73 -68 -101 -77 -101 -5 0 -31 21 -57 47 l-48 47 57 58 57 58 42 -41 c42 -41 42 -42 26 -68z m-234 -174 l52 -53 -55 -54 -55 -54 -55 54 -55 54 52 53 c29 29 55 53 58 53 3 0 29 -24 58 -53z"/>
                                <path d="M1795 2898 c-28 -16 -35 -28 -35 -65 0 -36 38 -73 76 -73 23 0 24 -3 24 -63 0 -83 37 -163 86 -183 38 -16 58 -11 96 24 86 79 70 309 -24 358 -33 17 -194 19 -223 2z"/>
                                <path d="M3090 2896 c-86 -47 -106 -260 -32 -347 35 -43 65 -52 108 -34 48 20 84 97 84 183 0 62 0 62 29 62 43 0 81 35 81 75 0 24 -7 39 -26 54 -23 18 -40 21 -123 21 -62 -1 -105 -6 -121 -14z"/>
                                <path d="M2341 2164 c-30 -38 -26 -71 12 -106 55 -53 122 -78 207 -78 85 0 152 25 208 78 37 35 41 68 11 106 -28 35 -71 34 -128 -4 -33 -23 -55 -30 -91 -30 -36 0 -58 7 -91 30 -57 38 -100 39 -128 4z"/>
                                </g>
                                </svg>
                            </div>
                            <div>{countGender().female}</div>
                        </div>
                    </div>
                    <div className='adminstudent-right-sub-topic'>
                        <div> <h2>Student List</h2></div>
                    </div>
                    <div className='adminstudent-table-main'>
                        <table className='adminstudent-table'>
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>DOB</th>
                                    <th>GPA</th>
                                    <th>Gender</th>
                                    <th>Email</th>

                                </tr>
                            </thead>
                            <tbody>
                                {tableBody()}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    )
}

export default DashBoard
